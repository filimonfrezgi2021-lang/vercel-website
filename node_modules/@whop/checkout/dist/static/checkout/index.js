"use strict";function e(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(e){if(Array.isArray(e))return e}function r(t){if(Array.isArray(t))return e(t)}function n(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function a(e,t,r,n,a,o,i){try{var u=e[o](i);var s=u.value}catch(e){r(e);return}if(u.done){t(s)}else{Promise.resolve(s).then(n,a)}}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,s,"next",e)}function s(e){a(i,n,o,u,s,"throw",e)}u(undefined)})}}function i(e,t,r){t=f(t);return P(e,R()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t,r){if(R()){s=Reflect.construct}else{s=function e(e,t,r){var n=[null];n.push.apply(n,t);var a=Function.bind.apply(e,n);var o=new a;if(r)C(o,r.prototype);return o}}return s.apply(null,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function c(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)C(e,t)}function h(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function p(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function m(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var n=[];var a=true;var o=false;var i,u;try{for(r=r.call(e);!(a=(i=r.next()).done);a=true){n.push(i.value);if(t&&n.length===t)break}}catch(e){o=true;u=e}finally{try{if(!a&&r["return"]!=null)r["return"]()}finally{if(o)throw u}}return n}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(t){c(e,t,r[t])})}return e}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(t){n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}r.push.apply(r,n)}return r}function _(e,t){t=t!=null?t:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{k(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function P(e,t){if(t&&(A(t)==="object"||typeof t==="function")){return t}return n(e)}function C(e,t){C=Object.setPrototypeOf||function e(e,t){e.__proto__=t;return e};return C(e,t)}function O(e,r){return t(e)||w(e,r)||q(e,r)||y()}function S(e){return t(e)||m(e)||q(e)||y()}function E(e){return r(e)||m(e)||q(e)||b()}function A(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function q(t,r){if(!t)return;if(typeof t==="string")return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}function j(e){var t=typeof Map==="function"?new Map:undefined;j=function e(e){if(e===null||!p(e))return e;if(typeof e!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof t!=="undefined"){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,f(this).constructor)}r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}});return C(r,e)};return j(e)}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(R=function(){return!!e})()}function L(e,t){var r,n,a,o={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return i.next=u(0),i["throw"]=u(1),i["return"]=u(2),typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(u){if(r)throw new TypeError("Generator is already executing.");while(i&&(i=0,u[0]&&(o=0)),o)try{if(r=1,n&&(a=u[0]&2?n["return"]:u[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;if(n=0,a)u=[u[0]&2,a.value];switch(u[0]){case 0:case 1:a=u;break;case 4:o.label++;return{value:u[1],done:false};case 5:o.label++;n=u[1];u=[0];continue;case 7:u=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(u[0]===6&&o.label<a[1]){o.label=a[1];a=u;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(u);break}if(a[2])o.ops.pop();o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e];n=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}}(function(){var e=function e(e){return A(e.data)=="object"&&e.data!==null&&"event"in e.data&&B.includes(e.data.event)};var t=function t(t,r){return e(t)&&t.data.event===r};var r=function e(e){return z[e]||(z[e]=(e+256).toString(16).slice(1))};var n=function e(){var e=new Uint8Array(16);if((typeof crypto==="undefined"?"undefined":A(crypto))<"u"&&typeof crypto.getRandomValues=="function")crypto.getRandomValues(e);else for(var t=0;t<16;t++)e[t]=Math.random()*256|0;return e[6]=e[6]&15|64,e[8]=e[8]&63|128,r(e[0])+r(e[1])+r(e[2])+r(e[3])+"-"+r(e[4])+r(e[5])+"-"+r(e[6])+r(e[7])+"-"+r(e[8])+r(e[9])+"-"+r(e[10])+r(e[11])+r(e[12])+r(e[13])+r(e[14])+r(e[15])};var a=function e(e,r,a,o){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:2e3,u=arguments.length>5?arguments[5]:void 0;var s;var l=new URL(e.src).origin,d=n();return(s=e.contentWindow)===null||s===void 0?void 0:s.postMessage(_(g({},r),{__scope:"whop-embedded-checkout",event_id:d}),l),new Promise(function(r,n){if(u===null||u===void 0?void 0:u.aborted){n(new Error("Aborted"));return}var s=function(){l&&clearTimeout(l),window.removeEventListener("message",f),u===null||u===void 0?void 0:u.removeEventListener("abort",c)},l=i!==null?setTimeout(function(){n(new D),s()},i):null,c=function(){n(new N),s()};u===null||u===void 0?void 0:u.addEventListener("abort",c,{once:!0});var f=function(i){if(i.source===e.contentWindow&&t(i,a)&&i.data.event===a&&i.data.event_id===d){s();try{r(o(i.data))}catch(e){n(e)}}};window.addEventListener("message",f)})};var s=function t(t,r){function n(n){if(n.source===t.contentWindow&&e(n)){switch(n.data.event){case"payment-request-create-request":{try{var a;var o=J.create(t,n.data.method_data,n.data.details,n.data.options),i={__scope:"whop-embedded-checkout",event:"payment-request-create-result",event_id:n.data.event_id,ok:!0,id:o.id},u=new URL(t.src).origin;(a=t.contentWindow)===null||a===void 0?void 0:a.postMessage(i,u)}catch(e){var s;var l={__scope:"whop-embedded-checkout",event:"payment-request-create-result",event_id:n.data.event_id,ok:!1,error:h(e,Error)?e.message:"Unknown error"},d=new URL(t.src).origin;(s=t.contentWindow)===null||s===void 0?void 0:s.postMessage(l,d)}return}case"payment-request-update-request":{"active"in n.data&&typeof n.data.active=="boolean"&&J.setActive(t,n.data.active);try{var c;var f=J.get(t);if(!f)throw new Error("Payment request not found");"method_data"in n.data&&n.data.method_data&&f.updateMethodData(n.data.method_data),"details"in n.data&&n.data.details&&f.updateDetails(n.data.details),"options"in n.data&&n.data.options&&f.updateOptions(n.data.options);var v={__scope:"whop-embedded-checkout",event:"payment-request-update-result",event_id:n.data.event_id,ok:!0},p=new URL(t.src).origin;(c=t.contentWindow)===null||c===void 0?void 0:c.postMessage(v,p)}catch(e){var m;var w={__scope:"whop-embedded-checkout",event:"payment-request-update-result",event_id:n.data.event_id,ok:!1,error:h(e,Error)?e.message:"Unknown error"},y=new URL(t.src).origin;(m=t.contentWindow)===null||m===void 0?void 0:m.postMessage(w,y)}return}}r(n.data)}}return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}};var l=function e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2e3;return o(function(){return L(this,function(n){return[2,a(e,{event:"set-email",email:t},"set-email-result",function(e){if(!e.ok)throw new H(e.error)},r)]})})()};var c=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2e3;return o(function(){return L(this,function(r){return[2,a(e,{event:"get-email"},"get-email-result",function(e){return e.email},t)]})})()};var f=function e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2e3;return o(function(){return L(this,function(n){return[2,a(e,{event:"set-address",address:t},"set-address-result",function(e){if(!e.ok)throw new F(e.error)},r)]})})()};var p=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2e3;return o(function(){return L(this,function(r){return[2,a(e,{event:"get-address"},"get-address-result",function(e){if(!e.ok)throw new V(e.error);return{address:e.address,isComplete:e.is_complete}},t)]})})()};var m=function e(e,t){return o(function(){var t,r,a,o,i;return L(this,function(u){switch(u.label){case 0:r={__scope:"whop-embedded-checkout",event:"submit",event_id:n()},a=J.get(e);if(!(a===null||a===void 0?void 0:a.active))return[3,2];return[4,a.getResult()];case 1:o=u.sent();r.payment_request_result=o;u.label=2;case 2:i=new URL(e.src).origin;(t=e.contentWindow)===null||t===void 0?void 0:t.postMessage(r,i);return[2]}})})()};var w=function e(e){if(e==="off_session")return"off_session"};var y=function e(e,t,r,n,a,o,i,u,s,l,d,c,f,v,h,p,m){var w,y,b,g,k,_,P;var C=new URL("/embedded/checkout/".concat(e,"/"),n!==null&&n!==void 0?n:"https://whop.com/");C.searchParams.set("h",window.location.origin),C.searchParams.set("v",$.toString());try{var S=window;for(;S.parent!==S;)S=S.parent;var E=S.location.hostname;S.location.protocol==="https:"&&E&&C.searchParams.set("t",E)}catch(e){}if(t&&C.searchParams.set("theme",t),r&&C.searchParams.set("session",r),a&&C.searchParams.set("hide_price","true"),o&&C.searchParams.set("skip_redirect","true"),d&&C.searchParams.set("hide_submit_button","true"),c&&C.searchParams.set("hide_tos","true"),f&&C.searchParams.set("email.hidden","1"),v&&C.searchParams.set("email.disabled","1"),h&&C.searchParams.set("address.hidden","1"),p&&C.searchParams.set("a",p),m&&C.searchParams.set("setup_future_usage",m),i){var A=true,q=false,j=undefined,R=true,L=false,U=undefined;try{for(var x=Object.entries(i).sort(function(e,t){return e[0].localeCompare(t[0])})[Symbol.iterator](),W;!(R=(W=x.next()).done);R=true){var M=O(W.value,2),T=M[0],I=M[1];if(T.startsWith("utm_"))if(Array.isArray(I))try{for(var D=I[Symbol.iterator](),N;!(A=(N=D.next()).done);A=true){var H=N.value;C.searchParams.append(T,H)}}catch(e){q=true;j=e}finally{try{if(!A&&D.return!=null){D.return()}}finally{if(q){throw j}}}else C.searchParams.set(T,I)}}catch(e){L=true;U=e}finally{try{if(!R&&x.return!=null){x.return()}}finally{if(L){throw U}}}}if(u){var F=true,V=false,B=undefined,z=true,G=false,J=undefined;try{for(var K=Object.entries(u)[Symbol.iterator](),Q;!(z=(Q=K.next()).done);z=true){var X=O(Q.value,2),Y=X[0],Z=X[1];if(Z)try{for(var ee=Object.entries(Z)[Symbol.iterator](),et;!(F=(et=ee.next()).done);F=true){var er=O(et.value,2),en=er[0],ea=er[1];C.searchParams.set("style.".concat(Y,".").concat(en),ea.toString())}}catch(e){V=true;B=e}finally{try{if(!F&&ee.return!=null){ee.return()}}finally{if(V){throw B}}}}}catch(e){G=true;J=e}finally{try{if(!z&&K.return!=null){K.return()}}finally{if(G){throw J}}}}var eo=true,ei=false,eu=undefined;if((s===null||s===void 0?void 0:s.email)&&C.searchParams.set("email",s.email),(s===null||s===void 0?void 0:(w=s.address)===null||w===void 0?void 0:w.name)&&C.searchParams.set("name",s.address.name),(s===null||s===void 0?void 0:(y=s.address)===null||y===void 0?void 0:y.line1)&&C.searchParams.set("address.line1",s.address.line1),(s===null||s===void 0?void 0:(b=s.address)===null||b===void 0?void 0:b.line2)&&C.searchParams.set("address.line2",s.address.line2),(s===null||s===void 0?void 0:(g=s.address)===null||g===void 0?void 0:g.city)&&C.searchParams.set("address.city",s.address.city),(s===null||s===void 0?void 0:(k=s.address)===null||k===void 0?void 0:k.country)&&C.searchParams.set("address.country",s.address.country),(s===null||s===void 0?void 0:(_=s.address)===null||_===void 0?void 0:_.state)&&C.searchParams.set("address.state",s.address.state),(s===null||s===void 0?void 0:(P=s.address)===null||P===void 0?void 0:P.postalCode)&&C.searchParams.set("address.postal_code",s.address.postalCode),l)try{for(var es=Object.entries(l)[Symbol.iterator](),el;!(eo=(el=es.next()).done);eo=true){var ed=O(el.value,2),ec=ed[0],ef=ed[1];ef&&C.searchParams.set("theme.".concat(ec),typeof ef=="boolean"?"1":ef)}}catch(e){ei=true;eu=e}finally{try{if(!eo&&es.return!=null){es.return()}}finally{if(ei){throw eu}}}return C.toString()};var b=function e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}if(!e)return;var a=window[e];a===null||a===void 0?void 0:a.apply(void 0,E(r))};var k=function e(e,t){var r;(r=window.wco)===null||r===void 0?void 0:r.frames.set(e,s(e,function(r){switch(r.event){case"resize":{e.style.height="".concat(r.height,"px");break}case"center":{e.scrollIntoView({block:"center",inline:"center"});break}case"complete":{b(t.dataset.whopCheckoutOnComplete,r.plan_id,r.receipt_id);break}case"state":{b(t.dataset.whopCheckoutOnStateChange,r.state);break}case"address-validation-error":{b(t.dataset.whopCheckoutOnAddressValidationError,{error_message:r.error_message,error_code:r.error_code});break}}}))};var P=function e(){var e=window;try{for(e.parent.location.href;e.location.origin==="null"&&e!==e.parent;)e=e.parent}catch(e){}return new URLSearchParams(e.location.search)};var C=function e(){var e=P();return Array.from(e.keys()).reduce(function(t,r){if(!r.startsWith("utm_"))return t;var n=e.getAll(r);switch(n.length){case 0:return t;case 1:{t[r]=n[0];break}default:t[r]=n}return t},{})};var q=function e(e){var t={};var r=true,n=false,a=undefined;try{for(var o=e.attributes[Symbol.iterator](),i;!(r=(i=o.next()).done);r=true){var u=i.value;if(u.name.startsWith(X)){var s=u.name.slice(X.length),l=u.value,d=S(s.split("-")),c=d[0],f=d.slice(1);if(c&&f.length>0){var v=f.reduce(function(e,t,r){if(r===0)return t;var n=S(t),a=n[0],o=n.slice(1);return"".concat(e).concat(a.toUpperCase()).concat(o.join(""))},"");var h;(h=t[c])!==null&&h!==void 0?h:t[c]={},t[c][v]=l}}}}catch(e){n=true;a=e}finally{try{if(!r&&o.return!=null){o.return()}}finally{if(n){throw a}}}return t};var R=function e(e){var t={};return e.dataset.whopCheckoutThemeAccentColor&&(t.accentColor=e.dataset.whopCheckoutThemeAccentColor),e.dataset.whopCheckoutThemeHighContrast&&(t.highContrast=e.dataset.whopCheckoutThemeHighContrast==="true"),t};var U=function e(e){var t={};var r,n,a,o,i,u,s;return e.dataset.whopCheckoutPrefillEmail&&(t.email=e.dataset.whopCheckoutPrefillEmail),e.dataset.whopCheckoutPrefillName&&((r=t.address)!==null&&r!==void 0?r:t.address={},t.address.name=e.dataset.whopCheckoutPrefillName),e.dataset.whopCheckoutPrefillAddressLine1&&((n=t.address)!==null&&n!==void 0?n:t.address={},t.address.line1=e.dataset.whopCheckoutPrefillAddressLine1),e.dataset.whopCheckoutPrefillAddressLine2&&((a=t.address)!==null&&a!==void 0?a:t.address={},t.address.line2=e.dataset.whopCheckoutPrefillAddressLine2),e.dataset.whopCheckoutPrefillAddressCity&&((o=t.address)!==null&&o!==void 0?o:t.address={},t.address.city=e.dataset.whopCheckoutPrefillAddressCity),e.dataset.whopCheckoutPrefillAddressCountry&&((i=t.address)!==null&&i!==void 0?i:t.address={},t.address.country=e.dataset.whopCheckoutPrefillAddressCountry),e.dataset.whopCheckoutPrefillAddressState&&((u=t.address)!==null&&u!==void 0?u:t.address={},t.address.state=e.dataset.whopCheckoutPrefillAddressState),e.dataset.whopCheckoutPrefillAddressPostalCode&&((s=t.address)!==null&&s!==void 0?s:t.address={},t.address.postalCode=e.dataset.whopCheckoutPrefillAddressPostalCode),t};var x=function e(e){var t;var r;if(e.dataset.whopCheckoutMounted)return;var n=e.dataset.whopCheckoutPlanId;if(!n)return;var a=y(n,e.dataset.whopCheckoutTheme,e.dataset.whopCheckoutSession,e.dataset.whopCheckoutOrigin,e.dataset.whopCheckoutHidePrice==="true",e.dataset.whopCheckoutSkipRedirect==="true"||!!e.dataset.whopCheckoutOnComplete,e.dataset.whopCheckoutSkipUtm==="true"?void 0:C(),q(e),U(e),R(e),e.dataset.whopCheckoutHideSubmitButton==="true",e.dataset.whopCheckoutHideTos==="true",e.dataset.whopCheckoutHideEmail==="true",e.dataset.whopCheckoutDisableEmail==="true",e.dataset.whopCheckoutHideAddress==="true",e.dataset.whopCheckoutAffiliateCode,w(e.dataset.whopCheckoutSetupFutureUsage)),o=document.createElement("iframe");o.src=a,o.style.width="100%",o.style.height="480px",o.style.border="none",o.style.overflow="hidden",(t=o.sandbox).add.apply(t,E(K)),o.allow=Q,e.dataset.whopCheckoutMounted="true",e.appendChild(o);var i=e.id;i&&((r=window.wco)===null||r===void 0?void 0:r.identifiedFrames.set(i,o),o.dataset.whopCheckoutIdentifier=i),k(o,e)};var W=Object.defineProperty;var M=function(e,t,r){return t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r};var T=function(e,t,r){return M(e,(typeof t==="undefined"?"undefined":A(t))!="symbol"?t+"":t,r)};var I=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);T(e,"type","WhopCheckoutError");return e}return t}(j(Error));var D=/*#__PURE__*/function(e){v(t,e);function t(e){u(this,t);var r;r=i(this,t,[e!==null&&e!==void 0?e:"Timeout waiting for embed response"]);T(r,"name","WhopCheckoutRpcTimeoutError");return r}return t}(I);var N=/*#__PURE__*/function(e){v(t,e);function t(e){u(this,t);var r;r=i(this,t,[e!==null&&e!==void 0?e:"Aborted waiting for embed response"]);T(r,"name","WhopCheckoutRpcAbortedError");return r}return t}(I);var H=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);T(e,"name","WhopCheckoutSetEmailError");return e}return t}(I);var F=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);T(e,"name","WhopCheckoutSetAddressError");return e}return t}(I);var V=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);T(e,"name","WhopCheckoutGetAddressError");return e}return t}(I);var B=["resize","center","complete","state","get-email-result","set-email-result","set-address-result","get-address-result","address-validation-error","payment-request-merchant-validation-result","payment-request-update-request","payment-request-create-request","payment-request-event-result"];var z=[];var G=/*#__PURE__*/function(){function e(t,r,a,o){u(this,e);this.iframe=t;this.methodData=r;this.details=a;this.options=o;T(this,"id",n());T(this,"abortController")}d(e,[{key:"active",get:function t(){var t;return(t=e.activeRequests.get(this.iframe))!==null&&t!==void 0?t:!1}},{key:"updateMethodData",value:function e(e){this.methodData=e}},{key:"updateDetails",value:function e(e){this.details=e}},{key:"updateOptions",value:function e(e){this.options=e}},{key:"getResult",value:function e(){return o(function(){var e,t,r,n,i,u,s,l,d,c;return L(this,function(f){switch(f.label){case 0:e=this;t=new AbortController;this.abortController=t;r=new PaymentRequest(this.methodData,this.details,this.options);r.onmerchantvalidation=function(n){return o(function(){var e,o;return L(this,function(i){switch(i.label){case 0:e={event:"payment-request-merchant-validation-request",validationURL:n.validationURL,methodName:n.methodName,id:this.id};return[4,a(this.iframe,e,"payment-request-merchant-validation-result",function(e){return e},null,t.signal).catch(function(){return null})];case 1:o=i.sent();(o===null||o===void 0?void 0:o.ok)?n.complete(o.merchantSession):r.abort();return[2]}})}).call(e)},r.onshippingaddresschange=function(e){e.updateWith({})},r.onpaymentmethodchange=function(r){return o(function(){var e,n;return L(this,function(o){switch(o.label){case 0:e={event:"payment-request-payment-method-change-request",id:this.id,data:r.methodDetails};return[4,a(this.iframe,e,"payment-request-event-result",function(e){return e},null,t.signal).catch(function(){return null})];case 1:n=o.sent();(n===null||n===void 0?void 0:n.ok)?r.updateWith(n.details):r.updateWith({});return[2]}})}).call(e)};n=r;f.label=1;case 1:f.trys.push([1,,6,7]);l=new Promise(function(e,r){var n=function(){r(new Error("Aborted"))};t.signal.addEventListener("abort",n,{once:!0}),i=function(){t.signal.removeEventListener("abort",n)}});return[4,Promise.race([r.show().then(function(e){return n=null,e}),l])];case 2:d=f.sent(),c=this.methodData.find(function(e){return e.supportedMethods===d.methodName});if(!!c)return[3,4];return[4,d.complete("fail")];case 3:throw f.sent(),new Error("PaymentRequest failed to complete because of missing method data");case 4:return[4,d.complete("success")];case 5:return[2,(f.sent(),{method:d.methodName,response:{payerEmail:d.payerEmail,details:JSON.parse(JSON.stringify(d.details))},options:this.options,methodData:{applePayMerchantIdentifier:c===null||c===void 0?void 0:(u=c.data)===null||u===void 0?void 0:u.merchantIdentifier,requestShipping:c===null||c===void 0?void 0:(s=c.data)===null||s===void 0?void 0:s.requiredShippingContactFields}})];case 6:n===null||n===void 0?void 0:n.abort(),i===null||i===void 0?void 0:i(),this.abortController=void 0;return[7];case 7:return[2]}})}).call(this)}},{key:"abort",value:function e(){var e;(e=this.abortController)===null||e===void 0?void 0:e.abort()}}],[{key:"get",value:function t(t){var r;return(r=e.requests.get(t))!==null&&r!==void 0?r:null}},{key:"create",value:function t(t,r,n,a){var o=new e(t,r,n,a);return e.requests.set(t,o),o}},{key:"remove",value:function t(t){var r;(r=e.requests.get(t))===null||r===void 0?void 0:r.abort(),e.requests.delete(t),e.activeRequests.delete(t)}},{key:"setActive",value:function t(t,r){e.activeRequests.set(t,r)}}]);return e}();T(G,"requests",new WeakMap),T(G,"activeRequests",new WeakMap);var J=G;var $=1;var K=["allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation","allow-top-navigation-by-user-activation","allow-downloads"],Q="document-domain; execution-while-not-rendered; execution-while-out-of-viewport; payment; paymentRequest; sync-script;";var X="data-whop-checkout-style-";if((typeof window==="undefined"?"undefined":A(window))<"u"&&window.wco&&!window.wco.listening){var Y=function e(e){var t;var r=(t=window.wco)===null||t===void 0?void 0:t.identifiedFrames.get(e);if(!r)throw new Error("No embed with identifier ".concat(e," found."));return r};ei=Y,window.wco.submit=function(e,t){return o(function(){return L(this,function(r){switch(r.label){case 0:return[4,m(Y(e),t)];case 1:r.sent();return[2]}})})()},window.wco.getEmail=function(e,t){return c(Y(e),t)},window.wco.setEmail=function(e,t,r){return l(Y(e),t,r)},window.wco.getAddress=function(e,t){return p(Y(e),t)},window.wco.setAddress=function(e,t,r){return f(Y(e),t,r)};var Z=new MutationObserver(function(e){var t=true,r=false,n=undefined;try{for(var a=e[Symbol.iterator](),o;!(t=(o=a.next()).done);t=true){var i=o.value;var u,s,l;var d=true,c=false,f=undefined;try{for(var v=i.addedNodes[Symbol.iterator](),p;!(d=(p=v.next()).done);d=true){var m=p.value;h(m,HTMLElement)&&m.dataset.whopCheckoutPlanId&&x(m)}}catch(e){c=true;f=e}finally{try{if(!d&&v.return!=null){v.return()}}finally{if(c){throw f}}}var w=Array.from(i.removedNodes);var y;var b=true,g=false,k=undefined;try{for(var _=((y=(u=window.wco)===null||u===void 0?void 0:u.frames)!==null&&y!==void 0?y:[])[Symbol.iterator](),P;!(b=(P=_.next()).done);b=true){var C=O(P.value,2),S=C[0],E=C[1];w.includes(S)&&(S.dataset.whopCheckoutIdentifier&&((s=window.wco)===null||s===void 0?void 0:s.identifiedFrames.delete(S.dataset.whopCheckoutIdentifier)),J.remove(S),E(),(l=window.wco)===null||l===void 0?void 0:l.frames.delete(S))}}catch(e){g=true;k=e}finally{try{if(!b&&_.return!=null){_.return()}}finally{if(g){throw k}}}}}catch(e){r=true;n=e}finally{try{if(!t&&a.return!=null){a.return()}}finally{if(r){throw n}}}});var ee=true,et=false,er=undefined;try{for(var en=document.querySelectorAll("[data-whop-checkout-plan-id]")[Symbol.iterator](),ea;!(ee=(ea=en.next()).done);ee=true){var eo=ea.value;h(eo,HTMLElement)&&x(eo)}}catch(e){et=true;er=e}finally{try{if(!ee&&en.return!=null){en.return()}}finally{if(et){throw er}}}Z.observe(document.body,{childList:!0,subtree:!0}),window.wco.listening=!0}var ei})();