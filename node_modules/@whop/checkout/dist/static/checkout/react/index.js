"use strict";function e(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(e){if(Array.isArray(e))return e}function r(t){if(Array.isArray(t))return e(t)}function n(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function o(e,t,r,n,o,a,i){try{var u=e[a](i);var s=u.value}catch(e){r(e);return}if(u.done){t(s)}else{Promise.resolve(s).then(n,o)}}function a(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function u(e){o(i,n,a,u,s,"next",e)}function s(e){o(i,n,a,u,s,"throw",e)}u(undefined)})}}function i(e,t,r){t=f(t);return E(e,W()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t,r){if(W()){s=Reflect.construct}else{s=function e(e,t,r){var n=[null];n.push.apply(n,t);var o=Function.bind.apply(e,n);var a=new o;if(r)j(a,r.prototype);return a}}return s.apply(null,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(e){return e.__proto__||Object.getPrototypeOf(e)};return f(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)j(e,t)}function p(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function h(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function m(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var n=[];var o=true;var a=false;var i,u;try{for(r=r.call(e);!(o=(i=r.next()).done);o=true){n.push(i.value);if(t&&n.length===t)break}}catch(e){a=true;u=e}finally{try{if(!o&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}return n}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(t){d(e,t,r[t])})}return e}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(t){n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}r.push.apply(r,n)}return r}function P(e,t){t=t!=null?t:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function O(e,t){if(e==null)return{};var r=k(e,t);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function k(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(t.indexOf(o)>=0)continue;r[o]=e[o]}return r}function E(e,t){if(t&&(R(t)==="object"||typeof t==="function")){return t}return n(e)}function j(e,t){j=Object.setPrototypeOf||function e(e,t){e.__proto__=t;return e};return j(e,t)}function S(e,r){return t(e)||y(e,r)||C(e,r)||b()}function q(e){return r(e)||m(e)||C(e)||w()}function R(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function C(t,r){if(!t)return;if(typeof t==="string")return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}function A(e){var t=typeof Map==="function"?new Map:undefined;A=function e(e){if(e===null||!h(e))return e;if(typeof e!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof t!=="undefined"){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,f(this).constructor)}r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}});return j(r,e)};return A(e)}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(W=function(){return!!e})()}function x(e,t){var r,n,o,a={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return i.next=u(0),i["throw"]=u(1),i["return"]=u(2),typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(u){if(r)throw new TypeError("Generator is already executing.");while(i&&(i=0,u[0]&&(a=0)),a)try{if(r=1,n&&(o=u[0]&2?n["return"]:u[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;if(n=0,o)u=[u[0]&2,o.value];switch(u[0]){case 0:case 1:o=u;break;case 4:a.label++;return{value:u[1],done:false};case 5:a.label++;n=u[1];u=[0];continue;case 7:u=a.ops.pop();a.trys.pop();continue;default:if(!(o=a.trys,o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){a=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(u[0]===6&&a.label<o[1]){a.label=o[1];o=u;break}if(o&&a.label<o[2]){a.label=o[2];a.ops.push(u);break}if(o[2])a.ops.pop();a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e];n=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}}(function(){var e=function e(e){return R(e.data)=="object"&&e.data!==null&&"event"in e.data&&X.includes(e.data.event)};var t=function t(t,r){return e(t)&&t.data.event===r};var r=function e(e){return Y[e]||(Y[e]=(e+256).toString(16).slice(1))};var n=function e(){var e=new Uint8Array(16);if((typeof crypto==="undefined"?"undefined":R(crypto))<"u"&&typeof crypto.getRandomValues=="function")crypto.getRandomValues(e);else for(var t=0;t<16;t++)e[t]=Math.random()*256|0;return e[6]=e[6]&15|64,e[8]=e[8]&63|128,r(e[0])+r(e[1])+r(e[2])+r(e[3])+"-"+r(e[4])+r(e[5])+"-"+r(e[6])+r(e[7])+"-"+r(e[8])+r(e[9])+"-"+r(e[10])+r(e[11])+r(e[12])+r(e[13])+r(e[14])+r(e[15])};var o=function e(e,r,o,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:2e3,u=arguments.length>5?arguments[5]:void 0;var s;var c=new URL(e.src).origin,l=n();return(s=e.contentWindow)===null||s===void 0?void 0:s.postMessage(P(g({},r),{__scope:"whop-embedded-checkout",event_id:l}),c),new Promise(function(r,n){if(u===null||u===void 0?void 0:u.aborted){n(new Error("Aborted"));return}var s=function(){c&&clearTimeout(c),window.removeEventListener("message",f),u===null||u===void 0?void 0:u.removeEventListener("abort",d)},c=i!==null?setTimeout(function(){n(new J),s()},i):null,d=function(){n(new H),s()};u===null||u===void 0?void 0:u.addEventListener("abort",d,{once:!0});var f=function(i){if(i.source===e.contentWindow&&t(i,o)&&i.data.event===o&&i.data.event_id===l){s();try{r(a(i.data))}catch(e){n(e)}}};window.addEventListener("message",f)})};var s=function t(t,r){function n(n){if(n.source===t.contentWindow&&e(n)){switch(n.data.event){case"payment-request-create-request":{try{var o;var a=ee.create(t,n.data.method_data,n.data.details,n.data.options),i={__scope:"whop-embedded-checkout",event:"payment-request-create-result",event_id:n.data.event_id,ok:!0,id:a.id},u=new URL(t.src).origin;(o=t.contentWindow)===null||o===void 0?void 0:o.postMessage(i,u)}catch(e){var s;var c={__scope:"whop-embedded-checkout",event:"payment-request-create-result",event_id:n.data.event_id,ok:!1,error:p(e,Error)?e.message:"Unknown error"},l=new URL(t.src).origin;(s=t.contentWindow)===null||s===void 0?void 0:s.postMessage(c,l)}return}case"payment-request-update-request":{"active"in n.data&&typeof n.data.active=="boolean"&&ee.setActive(t,n.data.active);try{var d;var f=ee.get(t);if(!f)throw new Error("Payment request not found");"method_data"in n.data&&n.data.method_data&&f.updateMethodData(n.data.method_data),"details"in n.data&&n.data.details&&f.updateDetails(n.data.details),"options"in n.data&&n.data.options&&f.updateOptions(n.data.options);var v={__scope:"whop-embedded-checkout",event:"payment-request-update-result",event_id:n.data.event_id,ok:!0},h=new URL(t.src).origin;(d=t.contentWindow)===null||d===void 0?void 0:d.postMessage(v,h)}catch(e){var m;var y={__scope:"whop-embedded-checkout",event:"payment-request-update-result",event_id:n.data.event_id,ok:!1,error:p(e,Error)?e.message:"Unknown error"},b=new URL(t.src).origin;(m=t.contentWindow)===null||m===void 0?void 0:m.postMessage(y,b)}return}}r(n.data)}}return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}};var c=function e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2e3;return a(function(){return x(this,function(n){return[2,o(e,{event:"set-email",email:t},"set-email-result",function(e){if(!e.ok)throw new $(e.error)},r)]})})()};var d=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2e3;return a(function(){return x(this,function(r){return[2,o(e,{event:"get-email"},"get-email-result",function(e){return e.email},t)]})})()};var f=function e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2e3;return a(function(){return x(this,function(n){return[2,o(e,{event:"set-address",address:t},"set-address-result",function(e){if(!e.ok)throw new K(e.error)},r)]})})()};var h=function e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2e3;return a(function(){return x(this,function(r){return[2,o(e,{event:"get-address"},"get-address-result",function(e){if(!e.ok)throw new Q(e.error);return{address:e.address,isComplete:e.is_complete}},t)]})})()};var m=function e(e,t){return a(function(){var t,r,o,a,i;return x(this,function(u){switch(u.label){case 0:r={__scope:"whop-embedded-checkout",event:"submit",event_id:n()},o=ee.get(e);if(!(o===null||o===void 0?void 0:o.active))return[3,2];return[4,o.getResult()];case 1:a=u.sent();r.payment_request_result=a;u.label=2;case 2:i=new URL(e.src).origin;(t=e.contentWindow)===null||t===void 0?void 0:t.postMessage(r,i);return[2]}})})()};var y=function e(e){if(e==="off_session")return"off_session"};var b=function e(e,t,r,n,o,a,i,u,s,c,l,d,f,v,p,h,m){var y,b,w,g,_,P,O;var k=new URL("/embedded/checkout/".concat(e,"/"),n!==null&&n!==void 0?n:"https://whop.com/");k.searchParams.set("h",window.location.origin),k.searchParams.set("v",er.toString());try{var E=window;for(;E.parent!==E;)E=E.parent;var j=E.location.hostname;E.location.protocol==="https:"&&j&&k.searchParams.set("t",j)}catch(e){}if(t&&k.searchParams.set("theme",t),r&&k.searchParams.set("session",r),o&&k.searchParams.set("hide_price","true"),a&&k.searchParams.set("skip_redirect","true"),l&&k.searchParams.set("hide_submit_button","true"),d&&k.searchParams.set("hide_tos","true"),f&&k.searchParams.set("email.hidden","1"),v&&k.searchParams.set("email.disabled","1"),p&&k.searchParams.set("address.hidden","1"),h&&k.searchParams.set("a",h),m&&k.searchParams.set("setup_future_usage",m),i){var q=true,R=false,C=undefined,A=true,W=false,x=undefined;try{for(var U=Object.entries(i).sort(function(e,t){return e[0].localeCompare(t[0])})[Symbol.iterator](),M;!(A=(M=U.next()).done);A=true){var D=S(M.value,2),I=D[0],L=D[1];if(I.startsWith("utm_"))if(Array.isArray(L))try{for(var N=L[Symbol.iterator](),T;!(q=(T=N.next()).done);q=true){var F=T.value;k.searchParams.append(I,F)}}catch(e){R=true;C=e}finally{try{if(!q&&N.return!=null){N.return()}}finally{if(R){throw C}}}else k.searchParams.set(I,L)}}catch(e){W=true;x=e}finally{try{if(!A&&U.return!=null){U.return()}}finally{if(W){throw x}}}}if(u){var V=true,z=false,B=undefined,G=true,J=false,H=undefined;try{for(var $=Object.entries(u)[Symbol.iterator](),K;!(G=(K=$.next()).done);G=true){var Q=S(K.value,2),X=Q[0],Y=Q[1];if(Y)try{for(var Z=Object.entries(Y)[Symbol.iterator](),ee;!(V=(ee=Z.next()).done);V=true){var et=S(ee.value,2),en=et[0],eo=et[1];k.searchParams.set("style.".concat(X,".").concat(en),eo.toString())}}catch(e){z=true;B=e}finally{try{if(!V&&Z.return!=null){Z.return()}}finally{if(z){throw B}}}}}catch(e){J=true;H=e}finally{try{if(!G&&$.return!=null){$.return()}}finally{if(J){throw H}}}}var ea=true,ei=false,eu=undefined;if((s===null||s===void 0?void 0:s.email)&&k.searchParams.set("email",s.email),(s===null||s===void 0?void 0:(y=s.address)===null||y===void 0?void 0:y.name)&&k.searchParams.set("name",s.address.name),(s===null||s===void 0?void 0:(b=s.address)===null||b===void 0?void 0:b.line1)&&k.searchParams.set("address.line1",s.address.line1),(s===null||s===void 0?void 0:(w=s.address)===null||w===void 0?void 0:w.line2)&&k.searchParams.set("address.line2",s.address.line2),(s===null||s===void 0?void 0:(g=s.address)===null||g===void 0?void 0:g.city)&&k.searchParams.set("address.city",s.address.city),(s===null||s===void 0?void 0:(_=s.address)===null||_===void 0?void 0:_.country)&&k.searchParams.set("address.country",s.address.country),(s===null||s===void 0?void 0:(P=s.address)===null||P===void 0?void 0:P.state)&&k.searchParams.set("address.state",s.address.state),(s===null||s===void 0?void 0:(O=s.address)===null||O===void 0?void 0:O.postalCode)&&k.searchParams.set("address.postal_code",s.address.postalCode),c)try{for(var es=Object.entries(c)[Symbol.iterator](),ec;!(ea=(ec=es.next()).done);ea=true){var el=S(ec.value,2),ed=el[0],ef=el[1];ef&&k.searchParams.set("theme.".concat(ed),typeof ef=="boolean"?"1":ef)}}catch(e){ei=true;eu=e}finally{try{if(!ea&&es.return!=null){es.return()}}finally{if(ei){throw eu}}}return k.toString()};var w=function e(){return function(){}};var _=function e(){return(0,ea.useSyncExternalStore)(w,function(){return!0},function(){return!1})};var k=function e(e){return e?ei.includes(e):!1};var E=function e(e){var t=(0,eu.useRef)(es);return t.current===es&&(t.current=e()),t};var j=function e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=E(function(){return b.apply(void 0,q(t))}),o=n.current;return C.apply(void 0,[o].concat(q(t))),o};var C=function e(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var o=S(r,17),a=o[0],i=o[1],u=o[2],s=o[3],c=o[4],l=o[5],d=o[6],f=o[7],v=o[8],p=o[9],h=o[10],m=o[11],y=o[12],w=o[13],g=o[14],_=o[15],P=o[16];var O=(0,ec.useMemo)(function(){return b(a,i,u,void 0,c,l,d,f,v,p,h,m,y,w,g,_,P)},[a,i,u,c,l,d,f,v,p,h,m,y,w,g,_,P]);(0,ec.useEffect)(function(){e!==O&&process.env.NODE_ENV==="development"&&console.warn("[WhopCheckoutEmbed] iframeUrl changed from ".concat(e," to ").concat(O,". Updating props on the checkout embed is not supported. Please rerender the component."))},[e,O])};var W=function e(){return(0,ev.useRef)(null)};var U=Object.create;var M=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var T=function(e,t,r){return t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r};var F=function(e){return(typeof require==="undefined"?"undefined":R(require))<"u"?require:(typeof Proxy==="undefined"?"undefined":R(Proxy))<"u"?new Proxy(e,{get:function(e,t){return((typeof require==="undefined"?"undefined":R(require))<"u"?require:e)[t]}}):e}(function(e){if((typeof require==="undefined"?"undefined":R(require))<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var V=function(e,t,r,n){var o=true,a=false,i=undefined;if(t&&(typeof t==="undefined"?"undefined":R(t))=="object"||typeof t=="function")try{var u=function(){var o=c.value;!N.call(e,o)&&o!==r&&M(e,o,{get:function(){return t[o]},enumerable:!(n=D(t,o))||n.enumerable})};for(var s=I(t)[Symbol.iterator](),c;!(o=(c=s.next()).done);o=true)u()}catch(e){a=true;i=e}finally{try{if(!o&&s.return!=null){s.return()}}finally{if(a){throw i}}}return e};var z=function(e,t,r){return r=e!=null?U(L(e)):{},V(t||!e||!e.__esModule?M(r,"default",{value:e,enumerable:!0}):r,e)};var B=function(e,t,r){return T(e,(typeof t==="undefined"?"undefined":R(t))!="symbol"?t+"":t,r)};var G=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);B(e,"type","WhopCheckoutError");return e}return t}(A(Error));var J=/*#__PURE__*/function(e){v(t,e);function t(e){u(this,t);var r;r=i(this,t,[e!==null&&e!==void 0?e:"Timeout waiting for embed response"]);B(r,"name","WhopCheckoutRpcTimeoutError");return r}return t}(G);var H=/*#__PURE__*/function(e){v(t,e);function t(e){u(this,t);var r;r=i(this,t,[e!==null&&e!==void 0?e:"Aborted waiting for embed response"]);B(r,"name","WhopCheckoutRpcAbortedError");return r}return t}(G);var $=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);B(e,"name","WhopCheckoutSetEmailError");return e}return t}(G);var K=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);B(e,"name","WhopCheckoutSetAddressError");return e}return t}(G);var Q=/*#__PURE__*/function(e){v(t,e);function t(){u(this,t);var e;e=i(this,t,arguments);B(e,"name","WhopCheckoutGetAddressError");return e}return t}(G);var X=["resize","center","complete","state","get-email-result","set-email-result","set-address-result","get-address-result","address-validation-error","payment-request-merchant-validation-result","payment-request-update-request","payment-request-create-request","payment-request-event-result"];var Y=[];var Z=/*#__PURE__*/function(){function e(t,r,o,a){u(this,e);this.iframe=t;this.methodData=r;this.details=o;this.options=a;B(this,"id",n());B(this,"abortController")}l(e,[{key:"active",get:function t(){var t;return(t=e.activeRequests.get(this.iframe))!==null&&t!==void 0?t:!1}},{key:"updateMethodData",value:function e(e){this.methodData=e}},{key:"updateDetails",value:function e(e){this.details=e}},{key:"updateOptions",value:function e(e){this.options=e}},{key:"getResult",value:function e(){return a(function(){var e,t,r,n,i,u,s,c,l,d;return x(this,function(f){switch(f.label){case 0:e=this;t=new AbortController;this.abortController=t;r=new PaymentRequest(this.methodData,this.details,this.options);r.onmerchantvalidation=function(n){return a(function(){var e,a;return x(this,function(i){switch(i.label){case 0:e={event:"payment-request-merchant-validation-request",validationURL:n.validationURL,methodName:n.methodName,id:this.id};return[4,o(this.iframe,e,"payment-request-merchant-validation-result",function(e){return e},null,t.signal).catch(function(){return null})];case 1:a=i.sent();(a===null||a===void 0?void 0:a.ok)?n.complete(a.merchantSession):r.abort();return[2]}})}).call(e)},r.onshippingaddresschange=function(e){e.updateWith({})},r.onpaymentmethodchange=function(r){return a(function(){var e,n;return x(this,function(a){switch(a.label){case 0:e={event:"payment-request-payment-method-change-request",id:this.id,data:r.methodDetails};return[4,o(this.iframe,e,"payment-request-event-result",function(e){return e},null,t.signal).catch(function(){return null})];case 1:n=a.sent();(n===null||n===void 0?void 0:n.ok)?r.updateWith(n.details):r.updateWith({});return[2]}})}).call(e)};n=r;f.label=1;case 1:f.trys.push([1,,6,7]);c=new Promise(function(e,r){var n=function(){r(new Error("Aborted"))};t.signal.addEventListener("abort",n,{once:!0}),i=function(){t.signal.removeEventListener("abort",n)}});return[4,Promise.race([r.show().then(function(e){return n=null,e}),c])];case 2:l=f.sent(),d=this.methodData.find(function(e){return e.supportedMethods===l.methodName});if(!!d)return[3,4];return[4,l.complete("fail")];case 3:throw f.sent(),new Error("PaymentRequest failed to complete because of missing method data");case 4:return[4,l.complete("success")];case 5:return[2,(f.sent(),{method:l.methodName,response:{payerEmail:l.payerEmail,details:JSON.parse(JSON.stringify(l.details))},options:this.options,methodData:{applePayMerchantIdentifier:d===null||d===void 0?void 0:(u=d.data)===null||u===void 0?void 0:u.merchantIdentifier,requestShipping:d===null||d===void 0?void 0:(s=d.data)===null||s===void 0?void 0:s.requiredShippingContactFields}})];case 6:n===null||n===void 0?void 0:n.abort(),i===null||i===void 0?void 0:i(),this.abortController=void 0;return[7];case 7:return[2]}})}).call(this)}},{key:"abort",value:function e(){var e;(e=this.abortController)===null||e===void 0?void 0:e.abort()}}],[{key:"get",value:function t(t){var r;return(r=e.requests.get(t))!==null&&r!==void 0?r:null}},{key:"create",value:function t(t,r,n,o){var a=new e(t,r,n,o);return e.requests.set(t,a),a}},{key:"remove",value:function t(t){var r;(r=e.requests.get(t))===null||r===void 0?void 0:r.abort(),e.requests.delete(t),e.activeRequests.delete(t)}},{key:"setActive",value:function t(t,r){e.activeRequests.set(t,r)}}]);return e}();B(Z,"requests",new WeakMap),B(Z,"activeRequests",new WeakMap);var ee=Z;var et=z(F("react"));var er=1;var en=["allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation","allow-top-navigation-by-user-activation","allow-downloads"],eo="document-domain; execution-while-not-rendered; execution-while-out-of-viewport; payment; paymentRequest; sync-script;";var ea=F("react");var ei=["tomato","red","ruby","crimson","pink","plum","purple","violet","iris","cyan","teal","jade","green","grass","brown","blue","orange","indigo","sky","mint","yellow","amber","lime","lemon","magenta","gold","bronze","gray"];var eu=F("react"),es=Symbol("none");var ec=F("react");var el=en.join(" ");var ed=(0,et.forwardRef)(function(e,t){var r=e.planId,n=e.theme,o=e.sessionId,i=e.hidePrice,u=i===void 0?!1:i,l=e.skipRedirect,v=l===void 0?!1:l,p=e.onComplete,b=e.onStateChange,w=e.onAddressValidationError,g=e.utm,_=e.styles,P=e.prefill,O=e.themeOptions,E=e.hideSubmitButton,q=E===void 0?!1:E,R=e.hideTermsAndConditions,C=R===void 0?!1:R,A=e.hideEmail,W=A===void 0?!1:A,U=e.disableEmail,M=U===void 0?!1:U,D=e.hideAddressForm,I=D===void 0?!1:D,L=e.affiliateCode,N=e.setupFutureUsage;var T=(0,et.useMemo)(function(){var e;return{accentColor:k(O===null||O===void 0?void 0:O.accentColor)?O.accentColor:void 0,highContrast:(e=O===null||O===void 0?void 0:O.highContrast)!==null&&e!==void 0?e:!1}},[O===null||O===void 0?void 0:O.accentColor,O===null||O===void 0?void 0:O.highContrast]),F=j(r,n,o,void 0,u,v||!!p,g,_,P,T,q,C,W,M,I,L,y(N)),V=(0,et.useRef)(null),z=S((0,et.useState)(480),2),B=z[0],G=z[1];return(0,et.useEffect)(function(){var e=V.current;if(e)return s(e,function(t){switch(t.event){case"resize":{G(t.height);break}case"center":{e.scrollIntoView({block:"center",inline:"center"});break}case"complete":{p&&p(t.plan_id,t.receipt_id);break}case"state":{b&&b(t.state);break}case"address-validation-error":{w&&w({error_message:t.error_message,error_code:t.error_code});break}}})},[p,b,w]),(0,et.useEffect)(function(){return function(){V.current&&ee.remove(V.current)}},[]),(0,et.useImperativeHandle)(t,function(){return{submit:function(e){return a(function(){return x(this,function(t){switch(t.label){case 0:if(!V.current)return[3,2];return[4,m(V.current,e)];case 1:return[2,t.sent()];case 2:return[2]}})})()},getEmail:function(e){if(!V.current)throw new Error("Whop embedded checkout frame not found");return d(V.current,e)},setEmail:function(e,t){if(!V.current)throw new Error("Whop embedded checkout frame not found");return c(V.current,e,t)},setAddress:function(e,t){if(!V.current)throw new Error("Whop embedded checkout frame not found");return f(V.current,e,t)},getAddress:function(e){if(!V.current)throw new Error("Whop embedded checkout frame not found");return h(V.current,e)}}},[]),et.default.createElement("iframe",{ref:V,allow:eo,sandbox:el,title:"Whop Embedded Checkout",src:F!==null&&F!==void 0?F:void 0,style:{border:"none",height:"".concat(B,"px"),width:"100%",overflow:"hidden"}})});ed.displayName="WhopCheckoutEmbedInner";var ef=(0,et.forwardRef)(function(e,t){var r=e.fallback,n=O(e,["fallback"]);return _()?et.default.createElement(ed,P(g({},n),{ref:t})):r!==null&&r!==void 0?r:null});ef.displayName="WhopCheckoutEmbed";var ev=F("react")})();